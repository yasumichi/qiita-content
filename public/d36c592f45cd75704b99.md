---
title: Linuxbrew で Neovim インストールしようとして third-party dependencies のビルドにこけて対処した話
tags:
  - Vim
  - linuxbrew
  - neovim
private: false
updated_at: '2016-07-16T12:22:13+09:00'
id: d36c592f45cd75704b99
organization_url_name: null
slide: false
ignorePublish: false
---
## 当方の環境

- [VineSeed](https://vinelinux.org/vineseed.html) ([Vine Linux](https://vinelinux.org/) 開発版) 64bit
- [Linuxbrew](http://linuxbrew.sh/)

## 発生したエラー

色んな所で皆さん苦労せずに [Neovim](https://neovim.io/) インストールされてるのですが、私の場合は、third-party dependencies のビルドで以下のようなエラーになってしまいました。

```
==> Building third-party dependencies.
==> cmake ../third-party -DUSE_BUNDLED_BUSTED=OFF -DUSE_BUNDLED_LUV=OFF -DUSE_EXISTING_SRC_DIR=ON -DCMAKE_C_FLAGS_RELEASE=-DNDEBUG -DCMAKE_CXX_FLAGS_RELEASE=-DNDEBUG -DCMAKE_INSTAL
==> make VERBOSE=1
Last 15 lines from /home/yasumichi/.cache/Homebrew/Logs/neovim/02.make:
libtool: compile:  /usr/bin/gcc -I. -DTERMINFO_DIRS=\"/etc/terminfo:/lib/terminfo:/usr/share/terminfo:/usr/lib/terminfo:/usr/local/share/terminfo:/usr/local/lib/terminfo\" -Wall -std=c99 -fPIC -c uniutil.c -o uniutil.o >/dev/null 2>&1
libtool --mode=link --tag=CC /usr/bin/gcc -L/home/yasumichi/.linuxbrew/lib -Wl,--dynamic-linker=/home/yasumichi/.linuxbrew/lib/ld.so -Wl,-rpath,/home/yasumichi/.linuxbrew/lib -rpath '/tmp/neovim-20160716-7461-1m1mceq/neovim-0.1.4/deps-build/usr/lib' -version-info 3:0:3 -o libunibilium.la unibilium.lo uninames.lo uniutil.lo
libtool: link: /usr/bin/gcc-4.8 -shared  -fPIC -DPIC  .libs/unibilium.o .libs/uninames.o .libs/uniutil.o   -L/home/yasumichi/.linuxbrew/lib  -Wl,--dynamic-linker=/home/yasumichi/.linuxbrew/lib/ld.so -Wl,-rpath -Wl,/home/yasumichi/.linuxbrew/lib   -Wl,-soname -Wl,libunibilium.so.0 -o .libs/libunibilium.so.0.3.0
/home/yasumichi/.linuxbrew/bin/libtool: line 10548: /usr/bin/gcc-4.8: No such file or directory
Makefile:66: ターゲット 'libunibilium.la' のレシピで失敗しました
make[3]: *** [libunibilium.la] エラー 127
make[3]: ディレクトリ '/tmp/neovim-20160716-7461-1m1mceq/neovim-0.1.4/deps-build/build/src/unibilium' から出ます
CMakeFiles/unibilium.dir/build.make:113: ターゲット 'build/src/unibilium-stamp/unibilium-build' のレシピで失敗しました
make[2]: *** [build/src/unibilium-stamp/unibilium-build] エラー 2
make[2]: ディレクトリ '/tmp/neovim-20160716-7461-1m1mceq/neovim-0.1.4/deps-build' から出ます
CMakeFiles/Makefile2:148: ターゲット 'CMakeFiles/unibilium.dir/all' のレシピで失敗しました
make[1]: *** [CMakeFiles/unibilium.dir/all] エラー 2
make[1]: ディレクトリ '/tmp/neovim-20160716-7461-1m1mceq/neovim-0.1.4/deps-build' から出ます
Makefile:86: ターゲット 'all' のレシピで失敗しました
make: *** [all] エラー 2
```

## 対処したこと

[Installing Neovim through Linuxbrew on AWS - Stack Overflow](https://stackoverflow.com/questions/37313507/installing-neovim-through-linuxbrew-on-aws) で同じ目に遭っている人がいたので同様の対処を行いました。

```
$ brew update
$ brew reinstall -s libtool
$ brew install neovim/neovim/neovim
```

libtool のインストール時に以下の警告が出たのがあれですが、とりあえず使えるので様子を見ることにします。

> ==> Caveats
> In order to prevent conflicts with Apple's own libtool we have prepended a "g"
> so, you have instead: glibtool and glibtoolize.

先ほどの記事から、[libtool: has /usr/bin/gcc-4.8 as default compiler · Issue #376 · Linuxbrew/homebrew-core](https://github.com/Linuxbrew/homebrew-core/issues/376) という Issue に辿れるのですが、バグ認定されているみたいなのでそのうち直るかもしれません。

## 参考リンク

- [Installing Neovim through Linuxbrew on AWS - Stack Overflow](https://stackoverflow.com/questions/37313507/installing-neovim-through-linuxbrew-on-aws)
- [お題：「Caveatってなんじゃ？」 | エンジニアのための英語](http://www.englishforengineers.jp/post/123421383036/%E3%81%8A%E9%A1%8Ccaveat%E3%81%A3%E3%81%A6%E3%81%AA%E3%82%93%E3%81%98%E3%82%83)
- [NeoVim、そしてdein.vimへ - Qiita](http://qiita.com/okamos/items/2259d5c770d51b88d75b)
